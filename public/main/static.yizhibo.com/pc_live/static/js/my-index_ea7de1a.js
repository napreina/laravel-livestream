var hostname=location.hostname;$(function(){if(index.changebf(),index.indexsd(),index.changeindexall(),index.pageing(),index.clicklike(),$(".m-pagination-info").css("display","none"),parent.common.versions.lenovo){var e=$(".index_all li a");e.each(function(){var e=$(this),i=e.attr("href");i.indexOf("?")>-1?e.attr("href",i+"&"+parent.common.versions.len_parameter):e.attr("href",i+"?"+parent.common.versions.len_parameter),e.attr("target","_parent")})}});var index={changebf:function(){$(".index_all li").mouseover(function(){$(this).addClass("lihover")}).mouseleave(function(){$(this).removeClass("lihover")}),$(".index_img").mouseover(function(){$(this).children(".index_img_hover").fadeIn()}).mouseleave(function(){$(this).children(".index_img_hover").fadeOut()})},indexsd:function(){{var e=0,i=window.document.location.href,n=window.document.location.pathname,a=i.indexOf(n);i.substring(0,a)}1==is_owner?$(".index_sd").bind("mouseover",function(){e=layer.tips('<div class="index_del">删除</div><div class="index_share01">分享</div>',$(this),{tips:[1,"rgba(0,0,0,0.70)"],time:0,skin:"myzan",success:function(){$(".index_sd").bind("mouseleave",function(){var e=$(this);setTimeout(function(){$(".layui-layer-content").hasClass("zai")||$(".myzan").css("display","none")},500),$(".layui-layer-content").bind("mouseover",function(){e.addClass("okdel"),$(this).addClass("zai"),$(".myzan ").css("display","block")}).bind("mouseleave",function(){e.removeClass("okdel"),$(this).removeClass("zai"),$(".myzan").css("display","none")})}),$(".index_del").click(function(){$(".index_sd").each(function(){if($(this).hasClass("okdel")){var e=$(this),i=e.prev().prev().html(),n=e.prev().html();parent.layer.confirm("确定删除？",{icon:3,title:"提示"},function(a){$.ajax({type:"post",url:"/member/h5api/delete_work",async:!0,data:{type:i,scid:n},success:function(){e.parent().parent().parent().remove(),e.removeClass("okdel"),parent.layer.msg("删除成功",{time:1e3}),window.location.reload()},error:function(){parent.layer.msg("删除失败",{time:1e3})}}),layer.close(a)})}})}),$(".index_share01").click(function(){$(".index_sd").each(function(){if($(this).hasClass("okdel")){var e=$(this),i=e.prev().prev().html(),n=e.prev().html(),a=e.attr("data-appkey"),s=e.attr("data-share_title"),t=e.parent().siblings(".index_img").children(".index_img_main")[0].src;if(0==i){var l="/l/"+n+".html";index.share(l,t,a,s)}else{var l="/p/"+n+".html";index.share(l,t,a,s)}}})})}})}):$(".index_sd").bind("mouseover",function(){e=layer.tips('<div class="index_share01">分享</div>',$(this),{tips:[1,"rgba(0,0,0,0.70)"],time:0,skin:"myzan",success:function(){$(".index_sd").bind("mouseleave",function(){var e=$(this);setTimeout(function(){$(".layui-layer-content").hasClass("zai")||$(".myzan").css("display","none")},500),$(".layui-layer-content").bind("mouseover",function(){e.addClass("okdel"),$(this).addClass("zai"),$(".myzan ").css("display","block")}).bind("mouseleave",function(){e.removeClass("okdel"),$(this).removeClass("zai"),$(".myzan").css("display","none")})}),$(".index_share01").click(function(){$(".index_sd").each(function(){if($(this).hasClass("okdel")){var e=$(this),i=e.prev().prev().html(),n=e.prev().html(),a=e.attr("data-appkey"),s=e.attr("data-share_title"),t=e.parent().siblings(".index_img").children(".index_img_main")[0].src;if(0==i){var l="/l/"+n+".html";index.share(l,t,a,s)}else{var l="/p/"+n+".html";index.share(l,t,a,s)}}})})}})}),$(".index_shareall").bind("click",function(){var e=$(this).siblings(".index_img").children(".index_img_hover").attr("href"),i=$(this).siblings(".index_img").children(".index_img_main")[0].src,n=$(this).attr("data-appkey"),a=$(this).attr("data-share_title");$(".index_shareall").removeClass("myshare"),$(this).addClass("myshare"),index.share(e,i,n,a)})},changeindexall:function(){$(".index_list li").click(function(){$(this).addClass("index_list_li").siblings().removeClass(),$(".index_all_list > ul").hide().eq($(".index_list li").index(this)).show()})},pageing:function(){var e=$(".index_all li").length,i=6;if($(".index_all li").css("display","none"),i>e){for(var n=0;e>n;n++)$(".index_all li").eq(n).css("display","block");$("#page").css("display","none")}else for(var n=0;i>n;n++)$(".index_all li").eq(n).css("display","block");$("#page").pagination({pageIndex:0,pageSize:i,total:e,debug:!0,showJump:!0,pageBtnCount:10,pageElementSort:["$page","$size","$jump","$info"]});var a,s=0,t=0,l=i,o=Math.ceil(e/i);$("#page").on("pageClicked",function(){$(".m-pagination-page li").each(function(){$(this).hasClass("active")&&(s=Number($(this).children("a").html()))}),console.log(s),t=(s-1)*i,l=s*i,l>e&&(l=e),console.log(t),console.log(l),$(".index_all li").css("display","none");for(var n=t;l>n;n++)$(".index_all li").eq(n).css("display","block")}),$(".m-pagination-group button").click(function(){if(a=$(".m-pagination-group input").val(),a>o)parent.layer.msg("请输入正确的页码");else{if(""==a)return parent.layer.msg("请输入正确的页码"),!1;console.log("$goIndex"+a),$(".index_all li").css("display","none"),t=(a-1)*i,l=a*i,l>e&&(l=e);for(var n=t;l>n;n++)$(".index_all li").eq(n).css("display","block")}})},clicklike:function(){$(".index_zan").click(function(){var e=$(this),i=e.next().next().html(),n=e.next().next().next().html(),a=e.html(),s=/[\u4e00-\u9fa5]/;$.ajax({type:"post",url:"/praise/h5api/add_praise",data:{type:i,scid:n},success:function(){s.test(a)?(e.css("color","#F9743A"),parent.layer.msg("赞成功~")):(a++,e.html(a),e.css("color","#F9743A"),parent.layer.msg("赞成功~"))}})})},share:function(e,i,n,a){parent.layer.open({type:1,title:!1,skin:"fenxiang",closeBtn:2,shift:-1,offset:"80px",shadeClose:!0,shade:.6,content:'<div class="fenxiang_main"><div class="fenxiang_main_bt fl tc">分享到</div><div class="fenxiang_main_btn fl"></div><ul class="fenxiang_main_list fl"><li class="weibo fl tc">微博</li><li class="weixin fl tc">微信</li><li class="qq fl tc">QQ</li><li class="qqzone fl tc">QQ空间</li></ul><div class="weixin_box dn fl"><img src="//www.yizhibo.com/www/index/qrpng" alt=""><p>使用微信扫一扫，分享给好友或朋友圈</p></div></div>',success:function(s){s.find(".weixin").click(function(){s.find(".weixin_box").slideToggle(function(){$(this).children("img").attr("src","//"+hostname+"/www/index/qrpng?url=//"+hostname+e)})}),s.find(".weibo").on("click",function(i){var i=i||window.event;i.stopPropagation();var s={appkey:n,url:"http://m.yizhibo.com"+e,title:a,summary:a,content:"utf-8"},t=[];for(var l in s)t.push(l+"="+encodeURIComponent(s[l]||""));window.open("http://service.weibo.com/share/share.php?"+t.join("&"))}),s.find(".qq").on("click",function(n){var n=n||window.event;n.stopPropagation();var s={url:"http://"+hostname+e,desc:"",title:a,summary:a,pics:i,site:"一直播"},t=[];for(var l in s)t.push(l+"="+encodeURIComponent(s[l]||""));window.open("http://connect.qq.com/widget/shareqq/index.html?"+t.join("&"))}),s.find(".qqzone").on("click",function(n){var n=n||window.event;n.stopPropagation();var s={url:"http://"+hostname+e,desc:"",title:a,summary:a,pics:i,site:"一直播"},t=[];for(var l in s)t.push(l+"="+encodeURIComponent(s[l]||""));return window.open("//sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+t.join("&")),!1})}})}};